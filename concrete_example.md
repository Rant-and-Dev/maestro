To run

    $ echo '{"user": {"name": "newuser", "passwd": null, "sudo": true}, "sshd": {"root": "nologin"}}' | maestro-apply root@host1.domain.tld

maestro needs to:

1. parse "user"
2. parse "sshd"
3. parse the content of "user"
4. parse the name
5. parse the password
6. parse the sudo
7. parse the content of "sshd"
8. parse the "root"
9. Executes something for "user", that uses POSIX operations to determine what user management interface is available.
10. Searches for the user "newuser" via that interface found above.
11. Sets the password of that user to an autogenerated password.
12. Check if the sudo policy is including the user (either directly in sudoers or in the group file).
13. If not, uses the default action (group) to add the user to the sudo policy, and add the sudo group in the sudoers file if not yet set.
14. Executes something for "sshd", to check if it is installed.
15. Searches for the PermitRootLogin instruction in the `sshd_config` file and sets it to `no`.

Let's do it in shell with POSIX operations, from step 9 on.

which (sentence interrupted)


For this, maestro first needs a json parser, which is easy to get; but it also needs:

- A way to know how to probe for existing interfaces for a given resource.
- A way to know their (the interfaces) capabilities.
- A way to know (sentence interrupted)
